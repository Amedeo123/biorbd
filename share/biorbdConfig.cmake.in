set(biorbd_VERSION @PROJECT_VERSION_MAJOR@.@PROJECT_VERSION_MINOR@.@PROJECT_VERSION_PATCH@)

@PACKAGE_INIT@

set_and_check(biorbd_INCLUDE_DIR "@biorbd_INCLUDE_FOLDER@")
set_and_check(biorbd_LIBRARY_DIR "@biorbd_LIB_FOLDER@")

find_library (biorbd_LIBRARY NAMES biorbd biorbd_debug PATHS ${biorbd_LIBRARY_DIR})

get_filename_component(biorbd_LIB_PATH ${biorbd_LIBRARY} DIRECTORY)
get_filename_component(biorbd_LIB_NAME ${biorbd_LIBRARY} NAME_WE)
get_filename_component(biorbd_LIB_EXTENSION ${biorbd_LIBRARY} EXT)

string(REGEX MATCH "_debug" debug_flag ${biorbd_LIB_NAME})
if (debug_flag)
    string(REGEX REPLACE ${debug_flag} "" biorbd_LIB_NAME ${biorbd_LIB_NAME})
endif()

set(biorbd_LIBRARIES
    ${biorbd_LIB_PATH}/${biorbd_LIB_NAME}${debug_flag}${biorbd_LIB_EXTENSION}
    ${biorbd_LIB_PATH}/${biorbd_LIB_NAME}_utils${debug_flag}${biorbd_LIB_EXTENSION}
    ${biorbd_LIB_PATH}/${biorbd_LIB_NAME}_rigidbody${debug_flag}${biorbd_LIB_EXTENSION}
    ${biorbd_LIB_PATH}/${biorbd_LIB_NAME}_muscles${debug_flag}${biorbd_LIB_EXTENSION}
    ${biorbd_LIB_PATH}/${biorbd_LIB_NAME}_actuators${debug_flag}${biorbd_LIB_EXTENSION}
)

# handle the QUIETLY and REQUIRED arguments and set DLIB_FOUND to TRUE if 
# all listed variables are TRUE
include (FindPackageHandleStandardArgs)
find_package_handle_standard_args (biorbd DEFAULT_MSG 
  biorbd_INCLUDE_DIR
  biorbd_LIBRARIES
)

check_required_components(biorbd)
